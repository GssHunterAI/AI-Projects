<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Score Prediction</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 20px;
        }
        .prediction-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        h1 {
            color: #0d6efd;
            margin-bottom: 25px;
        }
        .form-label {
            font-weight: 500;
        }
        .btn-primary {
            margin-top: 20px;
            padding: 10px 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="prediction-container">
                    <h1 class="text-center">Credit Score Prediction</h1>
                    <p class="lead text-center mb-4">Enter customer financial information to predict credit score and default risk</p>
                    
                    <form action="/predict" method="post">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="income" class="form-label">Income (Last 12 months)</label>
                                <input type="number" class="form-control" id="income" name="INCOME" required step="any">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="savings" class="form-label">Savings (Last 12 months)</label>
                                <input type="number" class="form-control" id="savings" name="SAVINGS" required step="any">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="debt" class="form-label">Existing Debt</label>
                                <input type="number" class="form-control" id="debt" name="DEBT" required step="any">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="r_savings_income" class="form-label">Savings to Income Ratio</label>
                                <input type="number" class="form-control" id="r_savings_income" name="R_SAVINGS_INCOME" step="any">
                                <small class="text-muted">Leave blank to auto-calculate</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="r_debt_income" class="form-label">Debt to Income Ratio</label>
                                <input type="number" class="form-control" id="r_debt_income" name="R_DEBT_INCOME" step="any">
                                <small class="text-muted">Leave blank to auto-calculate</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="r_debt_savings" class="form-label">Debt to Savings Ratio</label>
                                <input type="number" class="form-control" id="r_debt_savings" name="R_DEBT_SAVINGS" step="any">
                                <small class="text-muted">Leave blank to auto-calculate</small>
                            </div>
                        </div>

                        <h4 class="mt-4 mb-3">Expenditures (Last 12 months)</h4>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="groceries" class="form-label">Groceries</label>
                                <input type="number" class="form-control" id="groceries" name="T_GROCERIES_12" value="0" step="any">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="housing" class="form-label">Housing</label>
                                <input type="number" class="form-control" id="housing" name="T_HOUSING_12" value="0" step="any">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="entertainment" class="form-label">Entertainment</label>
                                <input type="number" class="form-control" id="entertainment" name="T_ENTERTAINMENT_12" value="0" step="any">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="gambling" class="form-label">Gambling</label>
                                <input type="number" class="form-control" id="gambling" name="T_GAMBLING_12" value="0" step="any">
                            </div>
                        </div>

                        <h4 class="mt-4 mb-3">Additional Information</h4>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="gambling_category" class="form-label">Gambling Category</label>
                                <select class="form-select" id="gambling_category" name="CAT_GAMBLING">
                                    <option value="none">None</option>
                                    <option value="low">Low</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-md-6 mb-3 form-check mt-4">
                                        <input type="checkbox" class="form-check-input" id="has_debt" name="CAT_DEBT" value="1">
                                        <label class="form-check-label" for="has_debt">Has Debt</label>
                                    </div>
                                    <div class="col-md-6 mb-3 form-check mt-4">
                                        <input type="checkbox" class="form-check-input" id="has_credit_card" name="CAT_CREDIT_CARD" value="1">
                                        <label class="form-check-label" for="has_credit_card">Has Credit Card</label>
                                    </div>
                                    <div class="col-md-6 mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="has_mortgage" name="CAT_MORTGAGE" value="1">
                                        <label class="form-check-label" for="has_mortgage">Has Mortgage</label>
                                    </div>
                                    <div class="col-md-6 mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="has_savings_account" name="CAT_SAVINGS_ACCOUNT" value="1">
                                        <label class="form-check-label" for="has_savings_account">Has Savings Account</label>
                                    </div>
                                    <div class="col-md-6 mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="has_dependents" name="CAT_DEPENDENTS" value="1">
                                        <label class="form-check-label" for="has_dependents">Has Dependents</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-primary">Predict Credit Score & Default Risk</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add JavaScript to auto-calculate ratios -->
    <script>
        document.getElementById('income').addEventListener('input', calculateRatios);
        document.getElementById('savings').addEventListener('input', calculateRatios);
        document.getElementById('debt').addEventListener('input', calculateRatios);
        
        function calculateRatios() {
            const income = parseFloat(document.getElementById('income').value) || 0;
            const savings = parseFloat(document.getElementById('savings').value) || 0;
            const debt = parseFloat(document.getElementById('debt').value) || 0;
            
            if (income > 0) {
                document.getElementById('r_savings_income').value = (savings / income).toFixed(4);
                document.getElementById('r_debt_income').value = (debt / income).toFixed(4);
            }
            
            if (savings > 0) {
                document.getElementById('r_debt_savings').value = (debt / savings).toFixed(4);
            }
            
            // Auto-check has_debt if debt > 0
            document.getElementById('has_debt').checked = debt > 0;
        }

        // Auto-check gambling category based on gambling expenditure
        document.getElementById('gambling').addEventListener('input', function() {
            const gamblingAmount = parseFloat(this.value) || 0;
            const income = parseFloat(document.getElementById('income').value) || 1;
            const gamblingRatio = gamblingAmount / income;
            
            if (gamblingAmount === 0) {
                document.getElementById('gambling_category').value = 'none';
            } else if (gamblingRatio < 0.05) {
                document.getElementById('gambling_category').value = 'low';
            } else {
                document.getElementById('gambling_category').value = 'high';
            }
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>